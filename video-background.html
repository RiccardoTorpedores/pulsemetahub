<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Video Background – Play with Sound</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- Styl licznika + tylko niezbędne poprawki -->
  <style>
    /* Domyślne (dla mobile): pełnoekranowe wideo jak w oryginale */
    #bg-video-second {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
      background-color: black;
    }

    /* Licznik odwiedzin */
    #visitor-counter {
      position: absolute;
      top: 0;
      left: 0;
      background-color: white;
      color: black;
      padding: 10px 15px;
      font-family: sans-serif;
      font-size: 14px;
      z-index: 10;
      border-bottom-right-radius: 5px;
    }

    /* Tylko dla desktopu – pomniejszone, wycentrowane wideo */
    @media screen and (min-width: 768px) {
      #bg-video-second {
        width: 66.66vw;
        height: auto;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        object-fit: contain;
        background-color: white;
      }

      body {
        background-color: white;
      }
    }
  </style>
</head>
<body>

  <!-- Wideo jako tło -->
  <video id="bg-video-second" autoplay muted loop playsinline>
    <source src="https://raw.githubusercontent.com/RiccardoTorpedores/pulsemetahub/main/pulsemetahub2.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <!-- Przycisk Play with Sound -->
  <div class="play-with-sound" onclick="toggleSound()">Play with Sound</div>

  <!-- Licznik odwiedzin -->
  <div id="visitor-counter">Visits: loading...</div>

  <script>
    // Przełączanie dźwięku
    function toggleSound() {
      const video = document.getElementById("bg-video-second");
      const button = document.querySelector('.play-with-sound');
      video.muted = !video.muted;

      if (video.muted) {
        button.innerHTML = "Play with Sound";
      } else {
        button.innerHTML = "Mute Video";
      }
    }

    // Licznik odwiedzin – działający endpoint
    fetch('https://api.countapi.xyz/hit/pulsemetahub-2025-corrected/final-counter')
      .then(res => res.json())
      .then(data => {
        document.getElementById('visitor-counter').innerText = 'Visits: ' + data.value;
      })
      .catch(() => {
        document.getElementById('visitor-counter').innerText = 'Visits: error';
      });
  </script>

</body>
</html>
